<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/contents.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/lostThings.css">
</head>
<body>
<header id="header"></header>
<section id="contents">
    <div class="inner">
        <div id="lostThings_container">
            <div id="lostThings_mainTitle">
                분실물
            </div>
            <br>
            <div id="lostThings_firstHeader">
                <div class="firstHeader_name firstHeader_items name_items">이름</div>
                <div class="firstHeader_title firstHeader_items title_items">제목</div>
                <div class="firstHeader_date firstHeader_items date_items">날짜</div>
            </div>
            <div id="lostThings_contents"></div>
            <br>
            <div id="lostThings_footer">
<!--                <div id="lostThings_page">-->
<!--                    <span><a href="#" class="directionBtn"><<</a></span>-->
<!--                    <span><a href="#" class="directionBtn"><</a></span>-->
<!--                    <span id="number">1 2 3</span>-->
<!--                    <span><a href="#" class="directionBtn">></a></span>-->
<!--                    <span><a href="#" class="directionBtn">>></a></span>-->
<!--                </div>-->
                <br>
                <div id="lostThings_Btn">
                    <div id="Btn_div">
                        <a href="/addLostThing" id="upload_lostThings">분실물 등록</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<footer id="footer"></footer>
<script src="/javascript/fetchMainHF.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    // 서버에서 데이터를 가져와서 HTML에 추가하는 함수
    function loadData() {
        // Ajax 요청 보내기
        $.ajax({
            url: '/getLostThingsData', // 서버에서 데이터를 가져오는 엔드포인트
            method: 'GET',
            success: function(data) {
                // 데이터를 받아서 HTML 생성 및 추가
                data.forEach(function(item) {
                    var html = `
                        <div class="lostThings_list" style="display:flex;
    flex-direction: row;
    margin-top:15px;
    padding-bottom: 5px;
    border-bottom: 1px solid #d8d8d8;">
                            <div class="name_items">아년석</div>
                            <div class="title_items"><a href="/lostThings/${item.id}">${item.itemName}</a></div>
                            <div class="date_items">${formatDate(item.createDate)}</div>
                        </div>
                    `;
                    $('#lostThings_contents').append(html);
                });
            },
            error: function(xhr, status, error) {
                console.error(error);
            }
        });
    }
    function formatDate(dateString) {
        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = ('0' + (date.getMonth() + 1)).slice(-2);
        const day = ('0' + date.getDate()).slice(-2);
        return `${year}-${month}-${day}`;
    }

    // 페이지 로드 시 데이터 로드
    $(document).ready(function() {
        loadData();
    });
</script>
</body>
</html>
